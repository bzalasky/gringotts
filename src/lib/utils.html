<!DOCTYPE html><html lang="en"><head><title>src/lib/utils</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="citare-relative-root" content="../../"><meta name="citare-document-path" content="src/lib/utils"><meta name="citare-project-path" content="src/lib/utils.coffee"><meta name="citare-github-url" content="https://github.com/lookout/gringotts"><link rel="stylesheet" type="text/css" media="all" href="../../assets/style.css"><script type="text/javascript" src="../../assets/behavior.js"></script><body><div id="bg"></div><div id="meta"><div class="file-path"><a href="https://github.com/lookout/gringotts/blob/master/src/lib/utils.coffee">src/lib/utils.coffee</a></div></div><div id="document" class="codedoc"><div class="segment nocode"><div class="comments"><div class="wrapper"><p>Typically, a project will create their own <code>utils</code> file/object to beget
<code>Chaplin.utils</code> and add their own methods. Feel free to map this file to
a more suitable path in <code>require.config</code>.</p></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>See <a href="https://github.com/chaplinjs/chaplin-boilerplate/blob/master/coffee/lib/utils.coffee">Chaplin utils</a>
for an example.</p></div></div><div class="code"><div class="wrapper">define <span class="function"><span class="params">(<span class="built_in">require</span>, <span class="built_in">exports</span>)</span> -&gt;</span>
  Backbone = <span class="built_in">require</span> <span class="string">'backbone'</span>
  Chaplin = <span class="built_in">require</span> <span class="string">'chaplin'</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>Alias to DOM library provided.</p></div></div><div class="code"><div class="wrapper">  $ = Backbone.$</div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>Delegate to the <code>Chaplin.utils</code> module</p></div></div><div class="code"><div class="wrapper">  utils = Chaplin.utils.beget Chaplin.utils</div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>Returns a string representation of an HTML node of type <code>tagName</code> wrapping
<code>content</code> with HTML attributes <code>attrs</code>.</p></div></div><div class="code"><div class="wrapper">  utils.<span class="function"><span class="title">tagBuilder</span> = <span class="params">(tagName, content, attrs, escape=<span class="literal">yes</span>)</span> -&gt;</span>
    tag = $ <span class="string">"&lt;<span class="subst">#{tagName}</span>&gt;"</span>
    <span class="keyword">if</span> escape</div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p><code>.text()</code> escapes the string it&#39;s given which we want</p></div></div><div class="code"><div class="wrapper">      tag.text content
    <span class="keyword">else</span>
      tag.html content
    tag.attr(attrs) <span class="keyword">if</span> attrs
    tag[<span class="number">0</span>].outerHTML</div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>Used in flight/compose in flight/advice.</p></div></div><div class="code"><div class="wrapper">  utils.<span class="function"><span class="title">isEnumerable</span> = <span class="params">(obj, property)</span> -&gt;</span>
    Object.keys(obj).indexOf(property) &gt; -<span class="number">1</span>

  utils.<span class="function"><span class="title">parseJSON</span> = <span class="params">(str)</span> -&gt;</span>
    result = <span class="literal">false</span>

    <span class="keyword">try</span>
      result = JSON.parse str
    <span class="keyword">catch</span> error</div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>Improve tag value of falsy values.</p></div></div><div class="code"><div class="wrapper">      <span class="keyword">if</span> <span class="keyword">typeof</span> str <span class="keyword">is</span> <span class="string">'undefined'</span>
        str = <span class="string">'undefined'</span>
      <span class="keyword">else</span> <span class="keyword">if</span> str.length <span class="keyword">is</span> <span class="number">0</span>
        str = <span class="string">'Empty string'</span>
      Raven?.captureException error, <span class="attribute">tags</span>: {str}

    result

  <span class="built_in">exports</span> = utils</div></div></div><div id="segment-footer"><div id="footer"><a href="https://github.com/druide/citare-scriptum" target="_blank">Generated by Citare scriptum</a></div></div></div></body></html>